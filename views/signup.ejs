<%- include("header") %>
    <div class="page">
    	<div class="container">
    		<form id="form" method="post" enctype="multipart/form-data">
			  <div class="form-group">
			    <label for="username">用户名</label>
			    <input type="text" class="form-control" name="username" id="username" placeholder="用户名">
			  </div>
			  <div class="form-group">
			    <label for="password">密码</label>
			    <input type="password" class="form-control"  name="password" id="password" placeholder="密码">
			  </div>
			  <div class="form-group">
			    <label for="repassword">确认密码</label>
			    <input type="password" class="form-control" name="repassword" id="repassword" placeholder="确认密码">
			  </div>
			  <div class="form-group">
			    <label for="portrait">上传头像</label>
			    <input type="file" id="portrait" name="portrait">
			  </div>
			  <button type="button" id="registerBtn" class="btn btn-default">注册</button>
			</form>
    	</div>
    </div>

    <script type="text/javascript">
    	$('#registerBtn').click(function () {
    		var formData = new FormData($( "#form" )[0]);  
    		$.ajax({
    			url: "/signup",
				data: formData,
				type: "POST",
				contentType:false, //必须
       			processData:false, //必须
				success: function (res) {
					console.log(res);
					if (res.code === 200) {
						window.location.href = '/signin'
					}
				},
				err: function (err) {
					console.log(err)
				}
    		})
    	})
    </script>
<%- include("footer") %>